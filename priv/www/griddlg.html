<html>
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>SlickGrid in Dialog</title>

    <link rel="stylesheet" href="../static/styles/dderl.css" type="text/css"/>
</head>

<body>
    <script src="../static/scripts/jquery.min.js"></script>
	<script src="../static/scripts/jquery-ui.min.js"></script>

    <script src="../static/slickgrid/lib/jquery.event.drag-2.0.min.js"></script>
    <script src="../static/slickgrid/slick.core.js"></script>
    <script src="../static/slickgrid/slick.grid.js"></script>
    <script src="../static/slickgrid/slick.formatters.js"></script>
    <script src="../static/slickgrid/slick.editors.js"></script>
    <script src="../static/slickgrid/slick.dataview.js"></script>
    <script src="../static/slickgrid/plugins/slick.cellrangedecorator.js"></script>
    <script src="../static/slickgrid/plugins/slick.cellrangeselector.js"></script>
    <script src="../static/slickgrid/plugins/slick.cellrowcolselectionmodel.js"></script>
    <script src="../static/scripts/jquery.contextMenu.js"></script>
    <script src="../static/scripts/jquery.jscrollpane.min.js"></script>
    <script src="../static/scripts/dderl.js"></script>
    <script src="../static/scripts/dderl.table.js"></script>

    <script language="javascript">
        $(document).ready(function()
        {
            var dlg = show_dlg();
            var columns = new Array();
            for(var cl = 10; cl > 0; --cl)
               columns[columns.length] = ("col" + cl);
            dlg.table("setColumns", columns);

            asyncRowBuilder(dlg, columns, 100);
        });

        function asyncRowBuilder(dlg, columns, count) {
            if(count < 0) return;

            var row = new Array();
            for(var j=0;j<columns.length; ++j) {
                row[j] = randomString(j*5);
            }
            var rows = new Array();
            rows[rows.length] = row;
            dlg.table("appendRows", rows);

            setTimeout(function() {
                asyncRowBuilder(dlg, columns, count-1);
            }, 1);
        }

        function show_dlg() {
            return $('<div>')
                    .appendTo(document.body)
                    .table({
                        autoOpen    : false,
                        title       : "Simple Dialog",
                        dderlSession: 1234,
                        dderlAdapter: 'imem',
                    })
                    .table('open');
        }

        function randomString(idx) {
        	var chars = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";
        	var string_length = 8;
        	var randomstring = '';
        	for (var i=0; i<Math.floor((Math.random()*idx)+1); i++) {
        		var rnum = Math.floor(Math.random() * chars.length);
        		randomstring += chars.substring(rnum,rnum+1);
        	}
        	return randomstring;
        }

    </script>
</body>

</html>

