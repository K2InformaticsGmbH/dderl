<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>DDerl 1.0</title>
    <link rel="stylesheet" href="../static/styles/dderl.css" type="text/css"/>

    <script src="../static/scripts/jquery.min.js"></script>
    <script src="../static/scripts/jquery-ui.min.js"></script>
    <script src="../static/scripts/jquery.combobox.js"></script>
    <script src="../static/scripts/jquery.contextMenu.js"></script>

    <script src="../static/slickgrid/lib/jquery.event.drag-2.0.min.js"></script>

    <script src="../static/slickgrid/slick.core.js"></script>
    <script src="../static/slickgrid/slick.grid.js"></script>
    <script src="../static/slickgrid/slick.formatters.js"></script>
    <script src="../static/slickgrid/slick.editors.js"></script>
    <script src="../static/slickgrid/slick.groupitemmetadataprovider.js"></script>
    <script src="../static/slickgrid/slick.dataview.js"></script>
    <script src="../static/slickgrid/plugins/slick.cellexternalcopymanager.js"></script>
    <script src="../static/slickgrid/plugins/slick.cellrangedecorator.js"></script>
    <script src="../static/slickgrid/plugins/slick.cellrangeselector.js"></script>
    <script src="../static/slickgrid/plugins/slick.rowselectionmodel.js"></script>
    <script src="../static/slickgrid/plugins/slick.cellrowcolselectionmodel.js"></script>
    <script src="../static/slickgrid/plugins/slick.rowmovemanager.js"></script>
    <script src="../static/slickgrid/plugins/slick.unicodeEditorFormatter.js"></script>
    <script src="../static/slickgrid/controls/slick.columnpicker.js"></script>

    <script src="../static/flot/jquery.flot.js"></script>
    <script src="../static/flot/jquery.flot.resize.js"></script>
    <script src="../static/flot/jquery.flot.time.js"></script>
    <script src="/bullet.js"></script>

    <script src="../static/angular-1.2.12/angular.js"></script>
    <script src="../static/angular-1.2.12/angular-route.js"></script>
    <script src="../static/ace-01.08.2014/ace.js"></script>
    <script src="../static/ace-01.08.2014/ext-language_tools.js"></script>
    <script src="../static/ui-ace-0.1.0/ui-ace.js"></script>

    <script src="../static/scripts/login.js"></script>
    <script src="../static/scripts/dderl.js"></script>
    <script src="../static/scripts/connect.js"></script>
    <script src="../static/scripts/dderl.table.js"></script>
    <script src="../static/scripts/dderl.sql.js"></script>
    <script src="../static/scripts/dderl.termEditor.js"></script>
    <script src="../static/scripts/dderl.plotTable.js"></script>
    <script src="../static/scripts/dderl.statsTable.js"></script>
    <script src="../static/scripts/dderl.dashboard.js"></script>
    <script src="../static/scripts/dderl.dashView.js"></script>
    <script src="../static/scripts/dderl.appController.js"></script>
    <script src="../static/scripts/dderl.sqlboxController.js"></script>
    <script src="../static/scripts/dderl.aceController.js"></script>

    <script language='javascript'>        
        $(document).ready(function() {
            $('#main-body').css('top', $('#main-menu-bar').height());
            if(Object.hasOwnProperty('freeze')) {
                patch_jquery_ui();
                check_already_connected();
            } else {
                $('#main-menu-bar').hide();
                alert_jq("We are really sorry, but we don't support your current browser version.");
            }

            $(window).on('beforeunload', function() {
                if(dderlState.connection) {
                    return "You will lose all unsaved data, are you sure you want to continue?";
                }
            });
            //beep(); // beep test
        });
    </script>
</head>

<body>
    <div id="main-menu-bar" class = "menubar">
        <ul class="dropdown menubar">
            <li><a>Query Server</a>
                <ul class="sub_menu">
                    <li><a id="files-list-button" onclick='show_qry_files(true)'>Tables and Views</a></li>
                    <li><a id="files-list-button" onclick='import_query()'>Import Query</a></li>
                    <li><a id="change-pswd-button" onclick='change_password(false)'>Change Password</a></li>
                    <li><a id="about-dderl-button" onclick='show_about_dlg()'>About</a></li>
                    <li><a id="disconnect-button" onclick='disconnect_tab()'>Disconnect</a></li>
                    <li><a id="logout-dderl-button" onclick='logout()'>Log out</a></li>
                </ul>
            </li>
            <li><a id="connect-button" onclick='new_connection_tab()'>New Connection</a></li>
            <li><a id="newsql-button" onclick='StartSqlEditor()'>New Query</a></li>
            <li><a id="newsql-button" onclick='window.open(window.location.protocol + "//" + window.location.host + "/sbs/", "_blank")'>Sbs poc</a></li>
            <li><a>Window</a>
                <ul id="window-finder" class="sub_menu">
                </ul>
            </li>
            <li><a id="tbl-opts" style="display:none">Options</a>
                <ul class="sub_menu">
                     <li><a id="table-edit-query" onclick='edit_table()'>Edit Query</a></li>
                     <li><a id="table-save" onclick='save_table()'>Save</a></li>
                     <li><a id="table-save-as" onclick='save_as_table()'>Save As</a></li>
                     <li><a id="table-export">Export Rows</a></li>
                </ul>
            </li>
        </ul>
        <div id="dashboard-menu">
        </div>
    </div>
    <div ng-app="dderlAngularApp">
      <div id="main-body">
      </div>
      <div ng-view id="angular-view"></div>
    </div>
    <div id="main_footer">
        <a id="login-button" href="#" onclick='logout()'></a>
        <span id="server-time"></span>
    </div>
    <audio class="tr_audio" id="beep-sound">
      <source src="static/media/success.ogg" type="audio/ogg">
      <source src="static/media/success.mp3" type="audio/mpeg">
    </audio>
</body>
</html>
